# GXVIS 要件定義書（憲法）

文書名：Global X Viral Intelligence System（GXVIS）要件定義書（憲法）
効力：GXVISに関与する人間・AI・プログラム・運用の全主体を拘束する。
優先順位：本憲法 ＞ その他の仕様 ＞ 実装 ＞ 運用メモ。
変更：本憲法の変更は「変更手続条項」に従わない限り無効とする。

---

## 第1章 総則

### 第1条（名称）
本システムは「Global X Viral Intelligence System（GXVIS）」と称する。

### 第2条（目的）
本システムが許可される行為は、以下に限る。

1. 公開情報として取得可能な媒体（X、ニュース、YouTube等）から暗号通貨／ミームコイン関連情報を収集し、正規化して保存すること
2. 保存済みデータに対して、バズ兆候の候補化、構造解析、構成案作成、X向け投稿案（日本語）生成を行うこと
3. 生成された投稿案を、人間が最終判断（修正／却下／投稿済み登録）できる状態で提供し、判断ログを保存すること

### 第3条（目的外行為の禁止）
前条に列挙されない目的外行為を行ってはならない。

### 第4条（出力物の位置づけ）
生成される投稿文・構成案・解析結果は、いかなる場合も「正解」ではない。
正解（Single Source of Truth）は中核データ（第12条）にのみ付与される。

---

## 第2章 前提条件（議論不可・変更不可）

### 第5条（唯一の入力契約）
本システムが扱う唯一の入力は、次のいずれかの方法で取得された「公開情報のデータ」である。

1. Xの公式APIにより取得された投稿情報
2. 規約に準拠したニュースフィード（RSS / News API / サイト提供フィード）により取得された記事情報
3. YouTubeの公式APIにより取得された動画メタデータ（および取得可能な範囲のテキスト情報）
4. 人間が手動で入力したURLおよびテキスト（手動インポート）

### 第6条（許可情報源）
許可情報源（Allowed Sources）は、第5条各号に定義された取得方法に限定する。

### 第7条（禁止情報源）
次の情報源を使用してはならない。

1. 非公開情報（DM、クローズドコミュニティ、会員限定、スクレイピングでしか取れない領域等）
2. 規約・権利・法令に抵触する方法で取得された情報
3. 出所不明の転載まとめ、改変された二次情報（原文・取得経路が追跡不能なもの）

### 第8条（最新性条件）
処理対象の原則は「公開／投稿から0〜3日以内」とする。
この条件を満たさないデータを「バズ候補化」「解析」「構成」「生成」の対象としてはならない。

### 第9条（言語条件）
解析対象言語は全言語とする。
生成出力言語は日本語に限定し、他言語生成をしてはならない。

---

## 第3章 判断主体の一元化

### 第10条（判断主体）
本システムの判断主体は、人間でもAIでもなく、次の「定義済み中核データ」のみとする。

- 正規化済みの取得データ
- 派生データ（候補スコア、解析結果、構成案、生成ドラフト）
- それらの生成に使用した固定ルールとテンプレ参照情報（ID）

### 第11条（恣意的判断の禁止）
人間・AI・実装者は、定義されていない基準に基づく判断をしてはならない。
定義されていない事項は「未定義」として扱い、未定義に依存する動作は実行してはならない。

---

## 第4章 正解の隔離と単一の真実

### 第12条（Single Source of Truth）
単一の真実（SSOT）は、PostgreSQLに保存される中核データ（正規化データおよび派生データ）のみとする。
UI表示・生成文章・画面上の編集結果はSSOTではない。

### 第13条（派生データの保存義務）
候補化・解析・構成・生成の各段階の結果は、必ず構造化データとして保存しなければならない。
保存されない派生データは、存在しないものとして扱わなければならない。

---

## 第5章 役割分離（責務の越境禁止）

### 第14条（人間の責務）
人間が許可される行為は、次のみに限定する。

1. 生成された投稿案の編集（テキストのみ）
2. 投稿可否の決定（承認／却下／投稿済み登録）
3. 必要に応じた注記の記録（却下理由、注意点等）
4. 取得元リンクの確認（事実確認の判断は人間が行う）

上記以外の介入（スコアの手修正、解析結果の改竄等）をしてはならない。

### 第15条（AIの責務）
AIが許可される行為は、次のみに限定する。

1. 構造解析・構成案作成・投稿文生成を、指定された出力フォーマット（JSON）で返すこと
2. リスク情報を指定フォーマットで付与すること

AIは、外部情報の追加、未取得情報の断定、投資助言の提供をしてはならない。

### 第16条（プログラムの責務）
プログラムが許可される行為は、次のみに限定する。

1. 許可情報源からの取得、正規化、保存
2. 既定パイプラインの実行（候補化→解析→構成→生成）
3. 出力の検証（JSONバリデーション、必須要件検査）
4. 監査ログおよびジョブログの保存

プログラムは、未定義の挙動を補完して実行してはならない。

---

## 第6章 生成仕様（固定要件）

### 第17条（感情設計）
X投稿生成は「感情70% / 情報30%」を固定要件として満たさなければならない。

### 第18条（冒頭フック）
生成投稿の1行目は、次のいずれかのフック型に必ず該当しなければならない。

- 問いかけ型
- 衝撃事実型
- 共感体験型

### 第19条（コピー技法）
生成投稿は、次を満たさなければならない。

- 「あなた」視点で書くこと
- 数字・根拠を優先し、過剰誇張をしてはならない
- 改行を多用し短文中心で読みやすくすること

### 第20条（CTA必須）
生成投稿の末尾には、必ずCTA（RT/いいね/ブクマ/フォロー/続報予告等）を含めなければならない。

### 第21条（テンプレ駆動）
生成投稿は、内部保持する30種テンプレートのいずれかを選択し、選択・変形の結果として生成されなければならない。
テンプレートは識別可能なID（またはcode）で参照され、参照情報は保存されなければならない。

---

## 第7章 権利・規約・安全

### 第22条（動画ダウンロード保存の禁止）
MVPにおいて、動画のダウンロード保存をしてはならない。
保存が必要な場合は、権利が明確に許諾されたものに限り、別途合意された運用ポリシーを必要とする。

### 第23条（参照方式）
動画・記事はURL参照を基本とし、保存する場合は「必要最小のメタデータ」に限定しなければならない。

### 第24条（誤情報・断定の禁止）
一次ソース未確認の情報を、確定情報として断定する表現を生成してはならない。
不確実性はrisk情報に必ず記録されなければならない。

### 第25条（自動投稿の禁止）
MVPにおいて、生成結果をXへ自動投稿してはならない。
投稿は人間の最終判断を必須とする。

---

## 第8章 再現性・監査

### 第26条（再現性要件）
同一の入力（保存済み中核データ）に対して、同一の設定・同一のテンプレ参照・同一の実行環境で処理した場合、結果が変動してはならない。
変動要因（AIモデル名、温度、プロンプト、テンプレID等）は全て記録しなければならない。

### 第27条（監査ログ義務）
次の行為は必ず監査ログとして保存されなければならない。

- 人間の編集内容（差分または全文）
- 承認／却下／投稿済み登録の決定
- ソース設定・テンプレ設定・閾値等の変更
- ジョブ実行の開始／終了／失敗理由

---

## 第9章 変更手続

### 第28条（変更手続）
本憲法の変更は、変更点・影響範囲・移行手順が文書化され、合意された場合にのみ有効とする。
実装者の裁量変更、運用現場判断による黙示変更は無効とする。

---

## 技術スタック（固定）

- Frontend/Backend: Next.js 15 (App Router)
- UI: Tailwind CSS
- ORM: Prisma
- DB: PostgreSQL
- Infrastructure: Google Cloud (Cloud Run / Cloud SQL / Cloud Storage / Secret Manager / Cloud Scheduler / Pub/Sub)

---

## 参照ドキュメント

- [要件定義書（全文・人間用）](../docs/requirements.md)
- [仕様書（UI / API / DB）](../docs/spec.md)
